<?php 
require_once('config.php') 
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=s, initial-scale=1.0">
    <title>Portfolio - Owais Farooq</title>
    <link rel="stylesheet" href="bootstrap.grid.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="banner area">
        <ul class="circles">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <h1>Owais Farooq</h1>
                    <h3>WordPress Developer</h3>
                    <div class="contact">
                        <a href="mailto:owaisfdev@gmail.com"><svg fill="#000000" height="25px" width="25px" version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M26.2,8.5c-2.2-3.2-5.6-5.2-9.3-5.5c-0.3,0-0.6,0-0.9,0c-3.7,0-7.2,1.6-9.7,4.3c-2.5,2.7-3.6,6.4-3.2,10.1 c0.7,6,5.5,10.8,11.5,11.4C15,29,15.5,29,16,29c2.6,0,5-0.7,7.2-2.2c0.5-0.3,0.6-0.9,0.3-1.4c-0.3-0.5-0.9-0.6-1.4-0.3 c-2.2,1.4-4.7,2.1-7.3,1.8c-5.1-0.5-9.1-4.6-9.7-9.7C4.7,14.1,5.7,11,7.8,8.7c2.3-2.5,5.6-3.9,9-3.6c3.2,0.2,6,1.9,7.8,4.6 c1.9,2.9,2.4,6.3,1.3,9.6l0,0.1c-0.3,1-1.3,1.7-2.4,1.7c-1.4,0-2.5-1.1-2.5-2.5V17v-2v-4c0-0.6-0.4-1-1-1s-1,0.4-1,1v0 c-0.8-0.6-1.9-1-3-1c-2.8,0-5,2.2-5,5v2c0,2.8,2.2,5,5,5c1.4,0,2.6-0.6,3.5-1.4c0.7,1.4,2.2,2.4,4,2.4c1.9,0,3.6-1.2,4.3-3.1l0-0.1 C29.1,16,28.5,11.9,26.2,8.5z M19,17c0,1.7-1.3,3-3,3s-3-1.3-3-3v-2c0-1.7,1.3-3,3-3s3,1.3,3,3V17z"></path> </g></svg> owaisfdev@gmail.com</a>
                        <a href="tel:+923430393998"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M5.11596 12.7268L8.15456 9.08666C8.46255 8.69067 8.61655 8.49267 8.69726 8.27061C8.76867 8.07411 8.79821 7.86486 8.784 7.65628C8.76793 7.42055 8.67477 7.18766 8.48846 6.72187L7.77776 4.94513C7.50204 4.25581 7.36417 3.91116 7.12635 3.68525C6.91678 3.48618 6.65417 3.3519 6.37009 3.29856C6.0477 3.23803 5.68758 3.32806 4.96733 3.50812L3 4.00002C3 14 9.99969 21 20 21L20.4916 19.0324C20.6717 18.3122 20.7617 17.952 20.7012 17.6297C20.6478 17.3456 20.5136 17.083 20.3145 16.8734C20.0886 16.6356 19.7439 16.4977 19.0546 16.222L17.4691 15.5878C16.9377 15.3752 16.672 15.2689 16.4071 15.2608C16.1729 15.2536 15.9404 15.3013 15.728 15.4002C15.4877 15.512 15.2854 15.7144 14.8807 16.1191L11.7943 19.1569" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg> +923430393998</a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <p>This text is placeholder. It will be replace by the original text. This text is placeholder. It will be replace by the original text. This text is placeholder. It will be replace by the original text. This text is placeholder. It will be replace by the original text. This text is placeholder. It will be replace by the original text. This text is placeholder. It will be replace by the original text.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
    <div class="table-wrap">
        <div class="searchbox"><svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M11 6C13.7614 6 16 8.23858 16 11M16.6588 16.6549L21 21M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg><div id="searchField" class="searchfield" contenteditable="true"></div></div>
        <table id="table" data-colhidden="0">
            <thead>
                <tr>
                    <th>Sn.</th>
                    <th>Completion Date</th>
                    <th>Project Name</th>
                    <th>Project URL</th>
                    <th>Project Type</th>
                    <th>Project Technology</th>
                </tr>
            </thead>
            <tbody>
            <?php 
$limit = 10;
$page = isset($_GET['page']) ? (int)$_GET['page'] : 1;
$offset = ($page - 1) * $limit;
$sql = "SELECT * FROM formdata LIMIT $limit OFFSET $offset";
$result = $conn->query($sql); 

if ($result->num_rows > 0) {
    // $i = (int)0;
    // foreach ($result as $row) {
    //     $i = $i + 1;
    //     echo '<tr class="table-row hidden" data-status="hidden">
    //         <td>'.$i.'</td>
    //         <td>'.$row["date"].'</td>
    //         <td>'.$row["name"].'</td>
    //         <td><a href="'.$row["url"].'" target="_blank">View Website</a></td>
    //         <td>'.$row["type"].'</td>
    //         <td>'.$row["technology"].'</td>
    //     </tr>';
    // }
} else {
    echo "<tr>
        <td colspan='6'>No record Found!</td>
    </tr>";
}

$conn->close();
?>

            </tbody>
        </table>
    </div>
    <button class="custom-btn btn-12 loadmore" id="loadMoreButton"><span>Click!</span><span>Load More</span></button>
</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
    function makeTableSortable(n, q) {
        "use strict";
      
        n = n || document;
      
        function r(n) {
          return n.length;
        }
      
        function t(n, t) {
          if (n) for (let e = 0, a = r(n); a > e; ++e) t(n[e], e);
        }
      
        function e(n) {
          return n
            .split("")
            .reverse()
            .join("");
        }
      
        function a(n) {
          let e = n[0];
          return (
            t(n, function(n) {
              for (; !n.startsWith(e); ) e = e.substring(0, r(e) - 1);
            }),
            r(e)
          );
        }
      
        function o(n, r) {
          return -1 != n.map(r).indexOf(!0);
        }
      
        function u(n, r) {
          return function(t) {
            let e = "";
            return (
              t.replace(n, function(n, t, a) {
                return (e = t.replace(r, "") + "." + (a || "").substring(1));
              }),
              l(e)
            );
          };
        }
      
        function i(n) {
          const t = l(n);
          return !isNaN(t) && r("" + t) + 1 >= r(n) ? t : NaN;
        }
      
        function s(n) {
          let e = [];
          return (
            t([i, m, g], function(t) {
              var a;
              r(e) || o((a = n.map(t)), isNaN) || (e = a);
            }),
            e
          );
        }
      
        function c(n) {
          let t = s(n);
          if (!r(t)) {
            const o = a(n),
              u = a(n.map(e)),
              i = n.map(function(n) {
                return n.substring(o, r(n) - u);
              });
            t = s(i);
          }
          return t;
        }
      
        function f(n) {
          const r = n.map(Date.parse);
          return o(r, isNaN) ? [] : r;
        }
      
        function v(n, r) {
          r(n),
            t(n.childNodes, function(n) {
              v(n, r);
            });
        }
      
        function d(n) {
          let r,
            t = [],
            e = [];
      
          return (
            v(n, function(n) {
              var a = n.nodeName;
              "TR" == a
                ? ((r = []), t.push(r), e.push(n))
                : ("TD" == a || "TH" == a) && r.push(n);
            }),
            [t, e]
          );
        }
      
        function p(n) {
          if ("TABLE" == n.nodeName) {
            for (
              var e = d(n),
                a = e[0],
                o = e[1],
                u = r(a),
                i = u > 1 && r(a[0]) < r(a[1]) ? 1 : 0,
                s = i + 1,
                v = a[i],
                p = r(v),
                l = [],
                m = [],
                g = [],
                h = s;
              u > h;
              ++h
            ) {
              for (let N = 0; p > N; ++N) {
                r(m) < p && m.push([]);
                const T = a[h][N],
                      C = T.textContent || T.innerText || "";
                m[N].push(C.trim());
              }
              g.push(h - s);
            }
            const L = "sort-asc",
                  E = "sort-desc",
                  b = function() {
                    for (let n = 0; p > n; ++n) {
                      var r = v[n].classList;
                      r.remove(L), r.remove(E), (l[n] = 0);
                    }
                  };
            t(v, function(n, t) {
              l[t] = 0;
              var e = n.classList;
              e.add("sort-header"),
                n.addEventListener("click", function() {
                  function n(n, r) {
                    const t = d[n],
                      e = d[r];
                    return t > e ? a : e > t ? -a : a * (n - r);
                  }
                  let a = l[t];
                  b(), (a = 1 == a ? -1 : +!a), a && e.add(a > 0 ? L : E), (l[t] = a);
                  const i = m[t];
                  let v = function(n, r) {
                      return a * i[n].localeCompare(i[r]) || a * (n - r);
                    },
                    d = c(i);
                  (r(d) || r((d = f(i)))) && (v = n);
                  const p = g.slice();
                  p.sort(v);
      
                  for (var h = null, N = s; u > N; ++N) {
                    (h = o[N].parentNode), h.removeChild(o[N]);
                  }
                  for (let N = s; u > N; ++N) h.appendChild(o[s + p[N - s]]);
                });
            });
          }
        }
        const l = parseFloat,
          m = u(/^(?:\s*)([+-]?(?:\d+)(?:,\d{3})*)(\.\d*)?$/g, /,/g),
          g = u(/^(?:\s*)([+-]?(?:\d+)(?:\.\d{3})*)(,\d*)?$/g, /\./g);
      
        q = typeof q !== "undefined"
          ? n.getElementsByClassName(q)
          : n.getElementsByTagName("table");
      
        n.addEventListener("DOMContentLoaded", function() {
          for (let t = q, e = 0; e < r(t); ++e) {
            try {
              p(t[e]);
            } catch (a) {}
          }
        });
      }
      
      makeTableSortable(document);
      
      $(function () {
        const table = document.getElementById('table'),
              $hideableEls = $(".js-hideable"),
              colContent = [],
              numCells = $hideableEls.length;  
      
        $("#btn-hide").click(() => {
          if (colContent.length !== numCells) {
            const hideableElArray = $hideableEls.toArray();
            for (const el of hideableElArray) {
              colContent.push(el.textContent);
            }
          }
          $hideableEls.text("");
          $hideableEls.hide({
            duration: 700,
            easing: "easeInSine"
          });
          table.dataset.colhidden = 1;
        });
      
        $("#btn-reset").click(function() {
          if (!+table.dataset.colhidden) {
            return;
          }
          let x = 0;
          $hideableEls.show({
            duration: 600,
            easing: "easeOutSine",
            complete: () => {
              $hideableEls[x].innerHTML = colContent[x++];
            }
          });
          table.dataset.colhidden = 0;
        });
      });</script>
      <script>
        const searchField = document.getElementById("searchField");
        // const table = document.getElementById("table");
        const rows = table.getElementsByTagName("tr");
    
        searchField.addEventListener("input", function () {
            const searchText = this.textContent.toLowerCase();
    
            for (let i = 1; i < rows.length; i++) {
                const row = rows[i];
                const columns = row.getElementsByTagName("td");
                let rowVisible = false;
    
                for (let j = 0; j < columns.length; j++) {
                    const columnText = columns[j].textContent.toLowerCase();
    
                    if (columnText.includes(searchText)) {
                        rowVisible = true;
                        break;
                    }
                }
    
                if (rowVisible) {
                    row.style.display = "";
                } else {
                    row.style.display = "none";
                }
            }
        });
    </script>
<script>
    const loadMoreButton = document.getElementById("loadMoreButton");
    let page = 1;
    let lastIndex = 0; // Track the last index
    const tableBody = document.querySelector("tbody");
    loadMoreButton.addEventListener("click", function () {
      
        fetch(`/fetchdata.php?page=${page}`)
            .then((response) => response.json()) // Parse JSON response
            .then((data) => {
                if (data.html.trim() !== "") {
                    tableBody.innerHTML += data.html;
                    
                    // Update lastIndex with the value from the server
                    lastIndex = data.lastIndex;
                    
                    page++;
                } else {
                    if (data.noMoreData) {
                        tableBody.innerHTML += '<tr><td colspan="6">No more data available.</td></tr>';
                        loadMoreButton.style.display = "none";
                    }
                }
            })
            .catch((error) => console.error("Error:", error));
    });
    loadMoreButton.click();
</script>





</body>
</html>